{"ast":null,"code":"var _jsxFileName = \"E:\\\\FYP\\\\Front\\\\W4_Employees\\\\src\\\\Components\\\\PolicyControl.js\",\n  _s = $RefreshSig$();\nimport { React, useState, useEffect } from 'react';\nimport axios from 'axios';\nimport { Link } from 'react-router-dom';\nimport Modal from 'react-bootstrap/Modal';\nimport Button from 'react-bootstrap/Button';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default function PolicyEditor() {\n  _s();\n  const [data, setData] = useState([]);\n  const [reload, setReload] = useState(false);\n  const [show, setShow] = useState(false);\n  const [msg, setMsg] = useState('');\n  useEffect(() => {\n    const loadPolicy = async () => {\n      await axios.get('http://127.0.0.1:8000/violations/all-policy/').then(response => {\n        setData(response.data);\n      });\n    };\n    loadPolicy();\n  }, [reload]);\n  const changeEnable = policy => {\n    const enabled = !policy.enabled;\n    const req = {\n      \"insensity\": policy.insensity,\n      \"duration\": policy.duration,\n      \"isallowed\": policy.isallowed,\n      \"activity\": policy.activity,\n      \"zone\": policy.zone,\n      \"enabled\": enabled\n    };\n    console.log(req);\n    axios.put('http://127.0.0.1:8000/violations/policy/' + policy.id + '/', req).then(response => {\n      setShow(true);\n      if (enabled == true) setMsg('Policy Enabled');else setMsg('Policy Disabled');\n      setReload(!reload);\n    }).catch(error => {\n      setShow(true);\n      setMsg(\"Oops an Error Occured!\");\n      console.error('There was an error!', error);\n    });\n  };\n  const DisplayPolicy = () => {\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: data.map((policy, i) => {\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"row p-0 py-1 border\",\n          style: {\n            background: 'white'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"col-4 text-center\",\n            children: String(policy.activity)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 59,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"col-1\",\n            children: String(policy.insensity)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 62,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"col-2 text-center\",\n            children: String(policy.duration)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 65,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"col-1 text-center\",\n            children: String(policy.zone)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 68,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"col-2 text-center\",\n            children: String(policy.isallowed)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 71,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"col-2 ps-5 text-center\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              class: \"form-check form-switch\",\n              children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                className: \"form-check-input\",\n                type: \"checkbox\",\n                onClick: () => changeEnable(policy),\n                checked: policy.enabled,\n                id: \"flexSwitchCheckDefault\",\n                style: {\n                  margin: 'auto'\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 76,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n                class: \"form-check-label\",\n                for: \"flexSwitchCheckDefault\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 77,\n                columnNumber: 37\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 75,\n              columnNumber: 33\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 74,\n            columnNumber: 29\n          }, this)]\n        }, i, true, {\n          fileName: _jsxFileName,\n          lineNumber: 58,\n          columnNumber: 25\n        }, this);\n      })\n    }, void 0, false);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container-fluid\",\n    style: {\n      height: '100%'\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"row mx-0 me-2 mt-4 p-0 py-1\",\n      style: {\n        color: 'white',\n        background: '#707070'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"col-4 pe-4 text-center\",\n        children: \"Activity\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"col-1 text-start\",\n        children: \"Intensity\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"col-2 text-center\",\n        children: \"Time Duration\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"col-1 ps-3\",\n        children: \"Zone\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"col-2 px-5\",\n        children: \"IsAllowed\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"col-2 px-4\",\n        children: \"Enable/Disable\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"row mx-0 mt-0 p-0\",\n      style: {\n        display: 'block',\n        overflowY: 'auto',\n        overflowX: 'hidden',\n        height: '50%'\n      },\n      children: /*#__PURE__*/_jsxDEV(DisplayPolicy, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 18\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Modal, {\n      show: show,\n      onHide: () => {\n        setShow(false);\n      },\n      children: /*#__PURE__*/_jsxDEV(Modal.Header, {\n        closeButton: true,\n        children: /*#__PURE__*/_jsxDEV(Modal.Title, {\n          children: msg\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 114,\n          columnNumber: 17\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 88,\n    columnNumber: 9\n  }, this);\n}\n_s(PolicyEditor, \"4ZgD5+ost0VOjDCJ4IXet9sOpT4=\");\n_c = PolicyEditor;\nvar _c;\n$RefreshReg$(_c, \"PolicyEditor\");","map":{"version":3,"names":["React","useState","useEffect","axios","Link","Modal","Button","PolicyEditor","data","setData","reload","setReload","show","setShow","msg","setMsg","loadPolicy","get","then","response","changeEnable","policy","enabled","req","insensity","duration","isallowed","activity","zone","console","log","put","id","catch","error","DisplayPolicy","map","i","background","String","margin","height","color","display","overflowY","overflowX"],"sources":["E:/FYP/Front/W4_Employees/src/Components/PolicyControl.js"],"sourcesContent":["import {React,useState,useEffect} from 'react';\nimport axios from 'axios';\nimport {\n    Link,\n  } from 'react-router-dom';\nimport Modal from 'react-bootstrap/Modal';\nimport Button from 'react-bootstrap/Button';\n\nexport default function PolicyEditor() {\n\n    const [data, setData] = useState([]);\n    const [reload, setReload] = useState(false);\n    const [show, setShow] = useState(false);\n    const [msg, setMsg] = useState('');\n    \n    useEffect(() => {\n    \n        const loadPolicy = async () => {\n          await axios.get('http://127.0.0.1:8000/violations/all-policy/')\n          .then(response =>{\n             setData(response.data)\n            })\n        }   \n        loadPolicy();\n      }, [reload]);\n\n    const changeEnable = (policy) =>{\n        const enabled = !policy.enabled\n        const req = {\n            \"insensity\": policy.insensity,\n            \"duration\": policy.duration,\n            \"isallowed\": policy.isallowed,\n            \"activity\": policy.activity,\n            \"zone\": policy.zone,\n            \"enabled\": enabled\n        }\n        console.log(req)\n        axios.put('http://127.0.0.1:8000/violations/policy/'+policy.id+'/', req)\n            .then(response => {\n                setShow(true)\n                if(enabled==true)\n                    setMsg('Policy Enabled')\n                else\n                    setMsg('Policy Disabled')\n                setReload(!reload);\n            })\n            .catch(error => {\n                setShow(true)\n                setMsg(\"Oops an Error Occured!\")\n                console.error('There was an error!', error);\n    });\n    }\n    const DisplayPolicy = () => {\n        return (\n            <>\n                {data.map((policy, i) => {\n                    return (\n                        <div key={i} className='row p-0 py-1 border' style={{ background: 'white' }}>\n                            <div className='col-4 text-center'>\n                                {String(policy.activity)}\n                            </div>\n                            <div className='col-1'>\n                                {String(policy.insensity)}\n                            </div>  \n                            <div className='col-2 text-center'>\n                                {String(policy.duration)}\n                            </div>\n                            <div className='col-1 text-center'>\n                                {String(policy.zone)}\n                            </div>\n                            <div className='col-2 text-center'>\n                                {String(policy.isallowed)}\n                            </div>\n                            <div className='col-2 ps-5 text-center'>\n                                <div class=\"form-check form-switch\">\n                                    <input className=\"form-check-input\" type=\"checkbox\" onClick={()=>changeEnable(policy)} checked={policy.enabled} id=\"flexSwitchCheckDefault\" style={{ margin: 'auto' }} />\n                                    <label class=\"form-check-label\" for=\"flexSwitchCheckDefault\"></label>\n                                </div>\n                            </div>\n                        </div>\n                    )\n                })}\n            </>\n        )\n    }\n    return (\n\n        <div className='container-fluid' style={{ height: '100%' }}>\n            <div className='row mx-0 me-2 mt-4 p-0 py-1' style={{ color: 'white', background: '#707070' }}>\n            <div className='col-4 pe-4 text-center'>\n                    Activity\n                </div>\n                <div className='col-1 text-start'>\n                    Intensity\n                </div>\n                <div className='col-2 text-center'>\n                    Time Duration\n                </div>\n                <div className='col-1 ps-3'>\n                    Zone\n                </div>\n                <div className='col-2 px-5'>\n                    IsAllowed\n                </div>\n                <div className='col-2 px-4'>\n                    Enable/Disable\n                </div>\n            </div>\n            <div className='row mx-0 mt-0 p-0' style={{ display: 'block', overflowY: 'auto', overflowX: 'hidden', height: '50%' }}>\n                {<DisplayPolicy />}\n            </div>\n            <Modal show={show} onHide={()=>{setShow(false)}}>\n                <Modal.Header closeButton>\n                <Modal.Title>{msg}</Modal.Title>\n                </Modal.Header>\n                {/* <Modal.Footer>\n                <Button variant=\"primary\" onClick={() =>{setShow(false)}}>\n                    Ok\n                </Button>\n                </Modal.Footer> */}\n            </Modal>\n        </div>\n    )\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}